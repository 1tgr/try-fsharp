<html>
    <head>
        <title>FSIndex</title>
        <script src="/_utils/script/json2.js"></script> 
        <script src="/_utils/script/jquery.js"></script> 
        <script src="/_utils/script/jquery.couch.js"></script> 
        <script src="jquery.livesearch.js"></script>

        <script>
$(function() {
    var db = $.couch.db("fsindex");

    $("#search").livesearch({
        minimumSearchLength: 1,
        searchCallback: function(term) {
            db.view(
                "app/by-name",
                {
                    startkey: [term, ""],
                    endkey: [term + "\ufff0", "\ufff0"],
                    success: function(results) {
                        var i, table = $("<table></table>");
                        for (i in results.rows) {
                            var tr = $("<tr><th></th><td></td></tr>");
                            var key = results.rows[i].key;
                            var value = results.rows[i].value;
                            tr.find("th").text(key[0]);
                            tr.find("td").text(value.namespace + "." + value.name);
                            table.append(tr);
                        }

                        $("#results").children("table").remove();
                        $("#results").append(table);
                    }
                });
        }
    });
});
        </script>
    </head>
    <body>
        <div>
            <label for="search">Search for:</label>
            <input id="search"></input>
        </div>
        <div id="results">
        </div>
    </body>
</html>
